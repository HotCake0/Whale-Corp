<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>고래상사 | 함께하는 성장의 가치</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <canvas id="background-canvas"></canvas>

    <header class="main-header">
        <div class="container header-flex">
            <a href="#" class="logo-link" onclick="showMainPage()">
                <img src="logo.png" alt="고래상사 로고" class="logo-image">
            </a>
            <nav class="main-nav">
                <ul>
                    <li><a href="#" onclick="showMainPage()">회사 소개</a></li>
                    <li><a href="#" onclick="showCastPage()">상사 소개</a></li>
                    <li><a href="#video" onclick="showMainPage()">대표 영상</a></li>
                    <li><a href="#md-shop" onclick="showMainPage()">MD샵</a></li>
                </ul>
            </nav>
        </div>
    </header>
    
    <div id="page-slider-wrapper">
        
        <div class="page-section" id="main-page">
            <section id="home" class="hero">
                <div class="hero-content">
                    <h1 class="hero-title">고래상사</h1>
                    <p class="hero-subtitle-en">Shaping the future of sustainable broadcasting.</p>
                    <p class="hero-subtitle-ko">초격차 꽁트력으로 지속가능한 미래 방송 사회 구현</p>
                    <button class="hero-button" onclick="showCastPage()">멤버 보러가기</button>
                </div>
            </section>

            <section id="about" class="section">
                <div class="container" style="text-align: center;">
                    <h2>고래상사 이야기</h2>
                    <p>고래상사는 단순한 즐거움을 넘어, 참여하고 몰입하며 온몸으로 웃는 경험을 만듭니다.</p>
                </div>
            </section>

            <section id="services" class="section bg-light">
                <div class="container">
                    <h2>사업 분야</h2>
                    <div class="services-grid">
                        <div class="service-item"><h3>대규모 컨텐츠</h3><p>전국민적 웃음과 화제를 이끌어내는 기획</p></div>
                        <div class="service-item"><h3>몰입형 엔터</h3><p>참여와 몰입으로 오감을 자극하는 콘텐츠</p></div>
                        <div class="service-item"><h3>멈출 수 없는 재미</h3><p>웃음으로 하나 되는 꽁트</p></div>
                    </div>
                </div>
            </section>
            
            <section id="video" class="section">
                <div class="container"><h2>대표 영상</h2><div class="video-wrapper"><iframe src="https://www.youtube.com/embed/y6UPzAMRWMI" frameborder="0" allowfullscreen></iframe></div></div>
            </section>

            <section id="md-shop" class="section bg-light">
                <div class="container"><h2>MD샵</h2><p style="text-align:center;">다양한 굿즈를 만나보세요.</p></div>
            </section>

            <footer class="main-footer">
                <div class="container"><p>© 2025 GORAECORP. All Rights Reserved.</p></div>
            </footer>
        </div>

        <div class="page-section" id="cast-page">
            <div class="container cast-container">
                <div class="cast-header">
                    <h2>고래상사 인재들</h2>
                    <button onclick="showMainPage()" class="back-btn"><i class="fas fa-arrow-left"></i> 돌아가기</button>
                </div>

                <div class="cast-controls">
                    <div class="search-wrapper">
                        <i class="fas fa-search"></i>
                        <input type="text" id="searchInput" placeholder="멤버 이름 검색...">
                    </div>
                    <div class="filter-wrapper">
                        <button class="filter-btn active" onclick="filterMembers('all')">전체</button>
                        <button class="filter-btn" onclick="filterMembers('live')">방송중</button>
                        <button class="filter-btn" onclick="filterMembers('off')">휴식중</button>
                    </div>
                </div>

                <div id="member-grid" class="cast-grid">
                    </div>
            </div>
        </div>
    </div>

    <script>
        // 1. 멤버 설정
        const members = [
            { id: "bach023", name: "울산큰고래", img: "꽃미남_성주.png", kw: "#바지사장 #멘헤라" },
            { id: "gyeonjahee", name: "견자희", img: "견자희.png", kw: "#장미상사 #견머니" },
            { id: "melodingding", name: "멜로딩딩", img: "멜로딩딩.png", kw: "#비서 #노예" },
            { id: "nunknown314", name: "미현영", img: "미현영.png", kw: "#만트라Q #투지" },
            { id: "soyoung6056", name: "빡쏘", img: "빡쏘.png", kw: "#빡보성 #서운해" },
            { id: "akdma9692", name: "온자두", img: "온자두.png", kw: "#미친사람 #에겐" },
            { id: "nlov555jij", name: "삐요코", img: "삐요코.png", kw: "#15금 #아찌빨" },
            { id: "xpdpfv2", name: "이지수", img: "이지수.png", kw: "#배그원툴 #따당님" },
            { id: "gatgdf", name: "쏭이", img: "쏭이.png", kw: "#오빠 #싸패" },
            { id: "kimmaren77", name: "김마렌", img: "김마렌.png", kw: "#RP의신 #쯰훈" },
            { id: "doki0818", name: "감자가비", img: "감자가비.png", kw: "#욕맛집 #남편구함" },
            { id: "dmng50", name: "빵땅콩", img: "빵땅콩.png", kw: "#억소속감 #모기" },
            { id: "ducke77", name: "밀크티냠", img: "밀크티냠.png", kw: "#직장인 #^^;;" },
            { id: "joaras2", name: "조아라", img: "조아라.png", kw: "#짐승 #똥방귀" }
        ];

        let liveData = {};
        let currentFilter = 'all';

        // 2. 데이터 불러오기
        async function loadCastData() {
            try {
                const res = await fetch('streamer_data.json?t=' + Date.now());
                if(res.ok) liveData = await res.json();
                renderGrid();
            } catch(e) { console.log("로딩 실패", e); }
        }

        // 3. 그리드 그리기
        function renderGrid() {
            const grid = document.getElementById('member-grid');
            const search = document.getElementById('searchInput').value.toLowerCase();
            grid.innerHTML = '';

            // 방송중 우선 정렬
            const sorted = [...members].sort((a,b) => {
                const aL = liveData[a.id]?.is_live ? 1 : 0;
                const bL = liveData[b.id]?.is_live ? 1 : 0;
                return bL - aL;
            });

            sorted.forEach(m => {
                const info = liveData[m.id] || { is_live: false, title: "", thumb: "", view_cnt: 0 };
                
                // 필터링
                if(currentFilter === 'live' && !info.is_live) return;
                if(currentFilter === 'off' && info.is_live) return;
                if(!m.name.toLowerCase().includes(search) && !m.kw.includes(search)) return;

                // 카드 HTML
                const card = document.createElement('div');
                card.className = 'grid-item';
                
                const imgUrl = (info.is_live && info.thumb) ? info.thumb : m.img;
                const link = `https://www.sooplive.co.kr/station/${m.id}`;

                card.innerHTML = `
                    <a href="${link}" target="_blank">
                        <div class="thumb-box">
                            ${info.is_live ? '<span class="badge live">LIVE</span>' : '<span class="badge off">OFF</span>'}
                            <img src="${imgUrl}" alt="${m.name}" class="${info.is_live ? 'is-live-img' : ''}">
                            ${info.is_live ? `<span class="badge view"><i class="fas fa-user"></i> ${info.view_cnt}</span>` : ''}
                        </div>
                        <div class="info-box">
                            <h3>${m.name}</h3>
                            <p class="keywords">${m.kw}</p>
                            <p class="title">${info.is_live ? info.title : "방송 준비중입니다."}</p>
                        </div>
                    </a>
                `;
                grid.appendChild(card);
            });
        }

        // 4. 화면 전환 함수
        function showCastPage() {
            document.getElementById('page-slider-wrapper').classList.add('slide-active');
            window.scrollTo(0,0);
            loadCastData();
        }
        function showMainPage() {
            document.getElementById('page-slider-wrapper').classList.remove('slide-active');
            window.scrollTo(0,0);
        }
        function filterMembers(type) {
            currentFilter = type;
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            renderGrid();
        }

        document.getElementById('searchInput').addEventListener('input', renderGrid);
        
        // 초기 실행
        loadCastData();
        setInterval(loadCastData, 60000);

        // 배경 캔버스 애니메이션 (간단 버전)
        const canvas = document.getElementById('background-canvas');
        const ctx = canvas.getContext('2d');
        function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        window.addEventListener('resize', resize); resize();
        function animate() {
            ctx.fillStyle = '#0d1a2f'; ctx.fillRect(0,0,canvas.width, canvas.height);
            requestAnimationFrame(animate);
        }
        animate();
    </script>
</body>
</html>
